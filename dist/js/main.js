var numSecTotal,secVisible,nomSec,numPag,disabled,classPag,numSec,numVista,animGen="fadeIn",animSec="fadeIn",numSeccion=0,dataPag={};function iniciaPortada(){$("#botonera a").each(function(i,e){$(e).off().click(function(ev){ev.preventDefault(),cargaVista(numVista="pag"+dosDigitos(i+1))}).children(".icono").html('<img src="./int/'+String(i+1)+"-Boton-"+dataPag.asignatura+'.svg">')}),$("#inicial").show().addClass("animated "+animGen).on("animationend",function(){$("#inicial").off().removeClass("animated "+animGen)});for(var i=0;i<dataPag.contenido.length;i++)$("#botonera #btn"+dosDigitos(i+1)+" .texto").html(dataPag.contenido[i].titulo)}function iniciaPag(vista){1<$("#inicial .contenido .seccion").length?ocultaSecciones():($(".anterior").hide(),$(".siguiente").hide()),$("#inicial").show().addClass("animated "+animGen).on("animationend",function(){$("#inicial").removeClass("animated "+animGen),$(".volver").off().click(function(){numSeccion=0,cargaVista("portada")})}),cargaContPagina(vista)}function cargaContPagina(vista){var num=Number(vista.substr(-2,2))-1,dpa=dataPag.contenido[num];$(".barra>.titulo>.texto").html(dpa.titulo)}function cargaSeccion(num){numSeccion=num,ocultaSecciones()}function ocultaSecciones(){numSecTotal=$("#inicial .contenido .seccion").length-1,secVisible=dosDigitos(numSeccion+1),$("#inicial .contenido .seccion").each(function(i,e){$.each($(e).attr("class").split(/\s+/),function(index,elemento){"sec"==elemento.substr(0,3)&&5==elemento.length&&(numSec=elemento.substr(3,2),nomSec=elemento)}),numSec==secVisible?$(this).show().addClass("animated "+animSec).on("animationend",function(){$("#inicial .contenido .seccion."+nomSec).removeClass("animated "+animSec)}):$(this).hide(),cargaTitulos()}),0<numSeccion?$(".anterior").off().removeClass("disabled").click(function(ev){ev.preventDefault(),cargaSeccion(numSeccion-1)}):$(".anterior").addClass("disabled").off(),numSecTotal<=numSeccion?$(".siguiente").addClass("disabled").off():$(".siguiente").off().removeClass("disabled").click(function(ev){ev.preventDefault(),cargaSeccion(numSeccion+1)})}function cargaVista(vista){$.get("views/"+vista+".html",function(html){$.each($("#inicial").attr("class").split(/\s+/),function(i,e){"container-fluid"!==e&&$("#inicial").removeClass(e)}),$("#inicial").addClass("view-"+vista).html(html).hide(),"portada"!==vista?($("#inicial").addClass("pagina"),iniciaPag(vista)):iniciaPortada(),cargaTitulos()})}function cargaTitulos(){$("#titulo>#desafio").html(dataPag.desafio),$("#titulo>#tema").html(dataPag.tema)}function dosDigitos(num){return num<10?"0"+num:String(num)}$(function(){$.getJSON("data/datos.json",function(data){dataPag=data,$("#inicial").prepend('<div class="progress"></div>'),$("#inicial").append('<div class="lds-default"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div>'),$.preload(dataPag.assets).then(function(){cargaVista("portada")},function(){console.log("¡¡Error de precarga!!"),cargaVista("portada")},function(progress){$("#inicial .progress").css("width",Math.round(100*progress)+"%")})})});