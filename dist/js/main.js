var numSecTotal,secVisible,nomSec,numPag,disabled,classPag,numSec,numVista,asignatura="cs",animGen="fadeIn",animSec="fadeIn",numSeccion=0,dataPag={},converter=new showdown.Converter;function iniciaPortada(){$("#botonera a").each(function(i,e){$(e).off().click(function(ev){ev.preventDefault(),cargaVista(numVista="pag"+dosDigitos(i+1))})}),$("#inicial").show().addClass("animated "+animGen).on("animationend",function(){$("#inicial").off().removeClass("animated "+animGen)});for(var i=0;i<dataPag.contenido.length;i++)$("#botonera #btn"+dosDigitos(i+1)+" .texto").html(dataPag.contenido[i].titulo)}function iniciaPag(vista){1<$("#inicial .contenido .seccion").length?ocultaSecciones():($(".anterior").hide(),$(".siguiente").hide()),$("#inicial").show().addClass("animated "+animGen).on("animationend",function(){$("#inicial").removeClass("animated "+animGen),$(".volver").off().click(function(){numSeccion=0,cargaVista("portada")})}),cargaContPagina(vista)}function cargaContPagina(vista){var num=Number(vista.substr(-2,2))-1,dpa=dataPag.contenido[num];switch($(".barra>.titulo>.texto").html(dpa.titulo),vista){case"pag01":$(".contenido .sec01 .video-youtube iframe.embed-responsive-item").attr("src",dpa.videoYoutube+"?controls=0"),$(".contenido .sec02 .preg-detona .texto").html(dpa.pregDetona);break;case"pag02":$(".contenido .sec01 .texto-inicial").html(dpa.textoInicial),$(".contenido .sec01 .texto-resaltado").html(dpa.textoResaltado);break;case"pag03":$(".contenido .sec01 .texto-resaltado").html(dpa.textoResaltado);break;case"pag04":$(".contenido .sec01 .texto-resaltado").html(dpa.sec01.textoResaltado),$(".contenido .sec01 .texto").html(converter.makeHtml(dpa.sec01.texto))}}function cargaSeccion(num){numSeccion=num,ocultaSecciones()}function ocultaSecciones(){numSecTotal=$("#inicial .contenido .seccion").length-1,secVisible=dosDigitos(numSeccion+1),$("#inicial .contenido .seccion").each(function(i,e){$.each($(e).attr("class").split(/\s+/),function(index,elemento){"sec"==elemento.substr(0,3)&&5==elemento.length&&(numSec=elemento.substr(3,2),nomSec=elemento)}),numSec==secVisible?$(this).show().addClass("animated "+animSec).on("animationend",function(){$("#inicial .contenido .seccion."+nomSec).removeClass("animated "+animSec)}):$(this).hide(),cargaTitulos()}),0<numSeccion?$(".anterior").off().removeClass("disabled").click(function(ev){ev.preventDefault(),cargaSeccion(numSeccion-1)}):$(".anterior").addClass("disabled").off(),numSecTotal<=numSeccion?$(".siguiente").addClass("disabled").off():$(".siguiente").off().removeClass("disabled").click(function(ev){ev.preventDefault(),cargaSeccion(numSeccion+1)})}function cargaVista(vista){$.get("views/"+vista+".html",function(html){$.each($("#inicial").attr("class").split(/\s+/),function(i,e){"container-fluid"!==e&&$("#inicial").removeClass(e)}),$("#inicial").addClass("view-"+vista).html(html).hide(),"portada"!==vista?($("#inicial").addClass("pagina"),iniciaPag(vista)):iniciaPortada(),cargaTitulos()})}function cargaTitulos(){$("#titulo>#desafio").html(dataPag.desafio),$("#titulo>#tema").html(dataPag.tema)}function dosDigitos(num){return num<10?"0"+num:String(num)}$(function(){$.getJSON("data/datos.json",function(data){dataPag=data,cargaVista("portada")})});